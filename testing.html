<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>City Time Converter</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            font-family: Arial, sans-serif;
        }
        h1 {
            margin-top: 20px;
        }
        label, input, button {
            margin: 10px;
        }
        #output {
            margin-top: 20px;
            font-size: 1.2em;
            color: #333;
        }
    </style>
</head>
<body>

    <h1>City Time Converter</h1>
    
    <label for="cityFrom">City You Are In:</label>
    <input type="text" id="cityFrom" placeholder="Enter your current city">
    
    <label for="timeAtCity">Time at Your City (HH:MM, 24hr format):</label>
    <input type="time" id="timeAtCity">
    
    <label for="cityTo">City You Want to Know the Time:</label>
    <input type="text" id="cityTo" placeholder="Enter target city">

    <button onclick="calculateTime()">Get Time</button>

    <div id="output"></div>

    <script>
        async function getCityTimeOffset(city) {
            const apiKey = 'YOUR_API_KEY';  // Replace with your TimeZoneDB API key
            const response = await fetch(`https://api.timezonedb.com/v2.1/get-time-zone?key=${apiKey}&format=json&by=zone&zone=${city}`);
            const data = await response.json();
            return data.gmtOffset; // returns the offset in seconds
        }

        async function calculateTime() {
            const cityFrom = document.getElementById('cityFrom').value;
            const timeAtCity = document.getElementById('timeAtCity').value;
            const cityTo = document.getElementById('cityTo').value;
            const outputDiv = document.getElementById('output');

            if (!cityFrom || !timeAtCity || !cityTo) {
                outputDiv.textContent = "Please fill in all fields.";
                return;
            }

            try {
                // Get offsets for both cities
                const offsetFrom = await getCityTimeOffset(cityFrom);
                const offsetTo = await getCityTimeOffset(cityTo);

                // Parse input time
                const [hours, minutes] = timeAtCity.split(':').map(Number);
                const inputDate = new Date();
                inputDate.setUTCHours(hours, minutes, 0, 0);

                // Calculate time difference
                const offsetDifference = (offsetTo - offsetFrom) / 3600; // convert seconds to hours
                const targetDate = new Date(inputDate.getTime() + offsetDifference * 3600 * 1000);

                // Format and display output
                const targetHours = targetDate.getUTCHours().toString().padStart(2, '0');
                const targetMinutes = targetDate.getUTCMinutes().toString().padStart(2, '0');
                outputDiv.textContent = `Time in ${cityTo}: ${targetHours}:${targetMinutes}`;
            } catch (error) {
                outputDiv.textContent = "Error retrieving time. Please check your city names or try again later.";
            }
        }
    </script>

</body>
</html>
